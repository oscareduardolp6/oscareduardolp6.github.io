(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const y="exercises",N=e=>"unilateral"in e,$=()=>{const e=localStorage.getItem(y);if(!e){const n=new Error("No hay ejercicios cargados");throw alert(n),n}return JSON.parse(e)},f=e=>`${p(e.getDate())}-${p(e.getMonth()+1)}-${e.getFullYear()}`,L=e=>`${e.name} ${e.variation} ${f(new Date)}.md`,p=e=>e<10?`0${e}`:e.toString(),b=({name:e,variation:t,sets:n})=>`---
tags: 
  - bitacora_ejercicio
---
# ðŸ’ª [[${e}]] del [[${f(new Date)}]] 

[Variacion:: ${t}] 
${n.map(([s,r],o)=>`
[Serie_${o+1}_derecha:: ${s}]
[Serie_${o+1}_izquierda:: ${r}]`).join("")}
`,O=({name:e,variation:t,sets:n})=>`---
tags: 
  - bitacora_ejercicio 
---
# ðŸ’ª [[${e}]] del [[${f(new Date)}]]

[Variacion:: ${t}] 

${n.map((s,r)=>`[Serie_${r+1}:: ${s}]`).join(`
`)}
`,j=async(e,t)=>{const n=L(e),r=await(await t.getFileHandle(n,{create:!0})).createWritable(),o=N(e)?b(e):O(e);await r.write(o),await r.close()},q=async()=>{const e=$(),t=await window.showDirectoryPicker();await Promise.all(e.map(s=>j(s,t))),alert("Archivos generados con Ã©xitos"),prompt("Desea eliminar los datos registrados")&&localStorage.removeItem(y)},d="exercises-names",l="exercises";J();function F(e){const t={};return e.forEach(([n,s])=>{const r=n.match(/set-(derecha|izquierda)-(\d+)/);if(!r)return;const o=r[1],c=parseInt(r[2]),a=parseInt(s);t[c]||(t[c]=[]),o==="derecha"?t[c][0]=a:o==="izquierda"&&(t[c][1]=a)}),Object.values(t).map(([n,s])=>[n,s])}function D(e){const t=Object.fromEntries(e),n=Object.entries(t).filter(([o])=>o.includes("set-")),s=F(n),r={name:t["exercise-name"],sets:s,unilateral:!0,variation:t.variation};return console.log({result:r}),r}function I(e){const t=Object.fromEntries(e),{variation:n}=t;console.log({data:t});const s=Object.entries(t).filter(([o,c])=>o.includes("set-")).map(([o,c])=>Number(c)),r={name:t["exercise-name"],variation:n,sets:s};return console.log({result:r}),r}function J(){const e=localStorage.getItem(d);if(!e)return alert("No hay nombres de ejercicios cargados, favor de cargar");const t=JSON.parse(e);w(t,E())}const h=document.querySelector("#exercises-location");if(!h)throw new Error("exercises Location Button no found");function T(e,t){return e.replace(t,"")}async function U(){const e=localStorage.getItem(d);if(e)return JSON.parse(e);const t=await window.showDirectoryPicker({mode:"read"}),n=[];for await(const{name:r}of t.values()){const o=T(r,".md");n.push(o)}const s=JSON.stringify(n);return localStorage.setItem(d,s),n}function _(e){return`
    <option>${e}</option>
  `}function g(e,t){const n=`"set-${t?t+"-"+(e+1):e+1}"`;return`
    <label>Serie ${e+1} ${t||""}</label>
    <input name=${n} id=${n} type="number" autocomplete="off" min="1" />
  `}function w(e,t){t.innerHTML=e.map(_).join("")}function E(){return document.querySelector("#exercises-names")}h.addEventListener("click",async()=>{const e=await U(),t=E();w(e,t)});function x(){var e;return((e=document.querySelector("#unilateral"))==null?void 0:e.checked)??!1}const C=document.querySelector("#add-set");let v=0,u="derecha";function S(){const e=u;return u=u==="derecha"?"izquierda":"derecha",e}C.addEventListener("click",()=>{const e=document.querySelector("#sets"),t=e.innerHTML??"",n=[...e.querySelectorAll("input").values()].map(a=>a.value);console.log({values:n});const s=x(),r=s?S():void 0,o=v++;let c=g(o,r);s&&(c=c.concat(g(o,S()))),e.innerHTML=t.concat(c),e.querySelectorAll("input").forEach((a,i)=>{a.value=n[i]??""}),s?e.querySelector("input:nth-last-of-type(2)").focus():e.querySelector("input:last-of-type").focus()});const m=document.querySelector("form"),H=document.querySelector("#clear-storage");H.addEventListener("click",()=>{localStorage.removeItem(l)});const B=document.querySelector("#export-to-json");B.addEventListener("click",()=>{const e=localStorage.getItem(l);if(!e){const o=new Error("No se puede exportar a json porque no hay registros");throw alert(o),o}const t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n;const r=new Date().toUTCString();s.download=`registros-${r}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)});function P(e){var r;const t=e.target;if(!((r=t.files)!=null&&r.length))return;const n=t.files[0],s=new FileReader;s.onload=function(o){var c,a;try{console.log((c=o.target)==null?void 0:c.result);const i=JSON.parse((a=o.target)==null?void 0:a.result);localStorage.setItem(l,JSON.stringify(i)),alert("Json cargado correctamente")}catch(i){alert("Error al cargar el archivo JSON"),console.error(`Error parsing JSON: ${i}`)}},s.readAsText(n)}const M=document.querySelector("#fileInput");M.addEventListener("change",P);function k(){m.reset();const e=document.querySelector("#sets");e.innerHTML="",v=0,u="derecha"}m.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(m),n=x()?D(t):I(t),s=localStorage.getItem(l),o=[...s?JSON.parse(s):[],n];localStorage.setItem(l,JSON.stringify(o)),k()});const A=document.querySelector("#script-button");A.addEventListener("click",q);
