(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const y="exercises",v=e=>"unilateral"in e,N=()=>{const e=localStorage.getItem(y);if(!e){const n=new Error("No hay ejercicios cargados");throw alert(n),n}return JSON.parse(e)},f=e=>`${p(e.getDate())}-${p(e.getMonth()+1)}-${e.getFullYear()}`,$=e=>`${e.name} ${e.variation} ${f(new Date)}.md`,p=e=>e<10?`0${e}`:e.toString(),L=({name:e,variation:t,sets:n})=>`---
tags: 
  - bitacora_ejercicio
---
# ðŸ’ª [[${e}]] del [[${f(new Date)}]] 

[Variacion:: ${t}] 
${n.map(([s,o],r)=>`
[Serie_${r+1}_derecha:: ${s}]
[Serie_${r+1}_izquierda:: ${o}]`).join("")}
`,b=({name:e,variation:t,sets:n})=>`---
tags: 
  - bitacora_ejercicio 
---
# ðŸ’ª [[${e}]] del [[${f(new Date)}]]

[Variacion:: ${t}] 

${n.map((s,o)=>`[Serie_${o+1}:: ${s}]`).join(`
`)}
`,O=async(e,t)=>{const n=$(e),o=await(await t.getFileHandle(n,{create:!0})).createWritable(),r=v(e)?L(e):b(e);await o.write(r),await o.close()},j=async()=>{const e=N(),t=await window.showDirectoryPicker();await Promise.all(e.map(s=>O(s,t))),alert("Archivos generados con Ã©xitos"),prompt("Desea eliminar los datos registrados")&&localStorage.removeItem(y)},d="exercises-names",l="exercises";I();function q(e){const t={};return e.forEach(([n,s])=>{const o=n.match(/set-(derecha|izquierda)-(\d+)/);if(!o)return;const r=o[1],c=parseInt(o[2]),a=parseInt(s);t[c]||(t[c]=[]),r==="derecha"?t[c][0]=a:r==="izquierda"&&(t[c][1]=a)}),Object.values(t).map(([n,s])=>[n,s])}function F(e){const t=Object.fromEntries(e),n=Object.entries(t).filter(([r])=>r.includes("set-")),s=q(n),o={name:t["exercise-name"],sets:s,unilateral:!0,variation:t.variation};return console.log({result:o}),o}function D(e){const t=Object.fromEntries(e),{variation:n}=t;console.log({data:t});const s=Object.entries(t).filter(([r,c])=>r.includes("set-")).map(([r,c])=>Number(c)),o={name:t["exercise-name"],variation:n,sets:s};return console.log({result:o}),o}function I(){const e=localStorage.getItem(d);if(!e)return alert("No hay nombres de ejercicios cargados, favor de cargar");const t=JSON.parse(e);w(t,E())}const h=document.querySelector("#exercises-location");if(!h)throw new Error("exercises Location Button no found");function J(e,t){return e.replace(t,"")}async function T(){const e=localStorage.getItem(d);if(e)return JSON.parse(e);const t=await window.showDirectoryPicker({mode:"read"}),n=[];for await(const{name:o}of t.values()){const r=J(o,".md");n.push(r)}const s=JSON.stringify(n);return localStorage.setItem(d,s),n}function U(e){return`
    <option>${e}</option>
  `}function g(e,t){const n=`"set-${t?t+"-"+(e+1):e+1}"`;return`
    <label>Serie ${e+1} ${t||""}</label>
    <input name=${n} id=${n} type="number" autocomplete="off" min="1" />
  `}function w(e,t){t.innerHTML=e.map(U).join("")}function E(){return document.querySelector("#exercises-names")}h.addEventListener("click",async()=>{const e=await T(),t=E();w(e,t)});function x(){var e;return((e=document.querySelector("#unilateral"))==null?void 0:e.checked)??!1}const _=document.querySelector("#add-set");let C=0,u="derecha";function S(){const e=u;return u=u==="derecha"?"izquierda":"derecha",e}_.addEventListener("click",()=>{const e=document.querySelector("#sets"),t=e.innerHTML??"",n=[...e.querySelectorAll("input").values()].map(a=>a.value);console.log({values:n});const s=x(),o=s?S():void 0,r=C++;let c=g(r,o);s&&(c=c.concat(g(r,S()))),e.innerHTML=t.concat(c),e.querySelectorAll("input").forEach((a,i)=>{a.value=n[i]??""}),s?e.querySelector("input:nth-last-of-type(2)").focus():e.querySelector("input:last-of-type").focus()});const m=document.querySelector("form"),H=document.querySelector("#clear-storage");H.addEventListener("click",()=>{localStorage.removeItem(l)});const B=document.querySelector("#export-to-json");B.addEventListener("click",()=>{const e=localStorage.getItem(l);if(!e){const r=new Error("No se puede exportar a json porque no hay registros");throw alert(r),r}const t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n;const o=new Date().toUTCString();s.download=`registros-${o}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)});function P(e){var o;const t=e.target;if(!((o=t.files)!=null&&o.length))return;const n=t.files[0],s=new FileReader;s.onload=function(r){var c,a;try{console.log((c=r.target)==null?void 0:c.result);const i=JSON.parse((a=r.target)==null?void 0:a.result);localStorage.setItem(l,JSON.stringify(i)),alert("Json cargado correctamente")}catch(i){alert("Error al cargar el archivo JSON"),console.error(`Error parsing JSON: ${i}`)}},s.readAsText(n)}const M=document.querySelector("#fileInput");M.addEventListener("change",P);function k(){m.reset();const e=document.querySelector("#sets");e.innerHTML=""}m.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(m),n=x()?F(t):D(t),s=localStorage.getItem(l),r=[...s?JSON.parse(s):[],n];localStorage.setItem(l,JSON.stringify(r)),k()});const A=document.querySelector("#script-button");A.addEventListener("click",j);
